"use strict";!function(o,i){var e=o.documentElement,t="orientationchange"in window?"orientationchange":"resize",a=function(){var o=e.clientWidth;if(!o)return!0;e.style.fontSize=o/360*36+"px"};if(!o.addEventListener)return;i.addEventListener(t,a,!1),o.addEventListener("DOMContentLoaded",a,!1)}(document,window);var login=!1;$.ajax({url:oPageConfig.oPageUrl.loginUrl,type:"get"}).done(function(o){o&&(login=!0)}),$.ajax({url:oPageConfig.oPageUrl.toolStatuUrl,type:"get"}).done(function(o){for(var i in o.data)o.data[i]&&toolGotten(i)}),$(".showDetail").click(function(){var o=$(this).attr("data-index");$(this).addClass("hide");var i=$(".info").eq(o);i.addClass("all-info"),i.find(".mid").removeClass("ellipsis"),i.find(".beh").removeClass("hide"),i.find(".takeBack").removeClass("hide")}),$(".takeBack").click(function(){var o=$(this).attr("data-index");$(this).addClass("hide");var i=$(".info").eq(o);i.removeClass("all-info"),i.find(".mid").addClass("ellipsis"),i.find(".beh").addClass("hide"),i.find(".showDetail").removeClass("hide")});var dialog_bg=$(".dialog-bg"),option=$(".box"),option1=$("#box1"),option2=$("#box2"),option3=$("#box3"),option4=$("#box4"),grayFlag=[[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1],[!1,!1]];function checkAllSelected(o){var i=grayFlag[o];for(var e in i)if(!i[e])return!1;return!0}function checkSingleSelected(){var o=grayFlag[2];for(var i in o)if(o[i])return!0;return!1}$(".confirm").click(function(){$(".dialog-box").hide(),dialog_bg.hide()}),$(".hide").click(function(){$(".dialog-box").hide(),dialog_bg.hide()}),option.find(".tool-item").on("click",function(){var o=$(this).hasClass("gray"),e=$(this),i=e.attr("data-id"),t=i.charAt(0);if(o||!o&&"3"===t&&checkSingleSelected()){var a="3"!==t||o?"亲，道具已经领取过了哦，请在您的邮箱中查看":"亲，道具只能领取一个哦";return $(".dialog-text").text(a),$(".dialog-box").show(),void dialog_bg.show()}login||($(".dialog-text").text("亲，您还没有登录哦，请先登录后重试"),$(".dialog-box").show(),dialog_bg.show());var n=i.charAt(2),d=void 0,l=oPageConfig.oPageUrl.optionUrl[t];"1"===t?d="e"===n?option1.find(".tool-item"):e:"2"===t?d="e"===n?option2.find(".tool-item"):e:"3"===t?d=e:"4"===t&&(d="e"===n?option4.find(".tool-item"):e),$.ajax({url:l,type:"get"}).done(function(o){var i=o.data.single_text;"0"===o.code?(function(){var o=grayFlag[parseInt(t)-1];if("3"!==t)return d.addClass("gray"),"e"!==n&&(o[parseInt(n)-1]=!0,checkAllSelected(parseInt(t)-1)&&e.parent().find(".tool-item").last().addClass("gray"));checkSingleSelected()||(o[parseInt(n)-1]=!0,d.addClass("gray"))}(),$(".dialog-text").text(i),$(".dialog-box").show(),dialog_bg.show()):"1"===o.code?($(".dialog-text").text("亲，您的账户不符合领取条件哦"),$(".dialog-box").show(),dialog_bg.show()):"2"===o.code&&($(".dialog-text").text("很抱歉，当前网络异常，请稍后重试"),$(".dialog-box").show(),dialog_bg.show())})});